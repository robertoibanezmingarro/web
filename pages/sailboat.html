<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Autonomous Sailboat Control System using STM32 | Roberto Ibáñez Mingarro</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=League+Gothic&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="../css/styles.css" />
    <script defer src="../js/main.js"></script>
  </head>
  <body data-page="portfolio">
    <a class="skip-link" href="#main-content">Saltar al contenido principal</a>
    <header class="site-header" id="site-header">
      <div class="header-inner">
        <a class="site-title" href="../index.html">Roberto Ibáñez Mingarro — Embedded Systems & Electronics</a>

        <button class="menu-toggle" type="button" aria-label="Abrir menú" aria-expanded="false" aria-controls="mobile-menu">
          <span></span><span></span><span></span>
        </button>

        <nav class="desktop-nav" aria-label="Navegación principal">
          <a href="../index.html" data-nav="home">Home</a>
          <a href="./portfolio.html" data-nav="portfolio">Portfolio</a>
          <a href="./resume.html" data-nav="resume">Resume</a>
          <a href="./contact.html" data-nav="contact">Contact</a>
        </nav>

        <div class="social-links" aria-label="Enlaces sociales">
          <a href="https://www.linkedin.com/in/robertoibanezmingarro/" target="_blank" rel="noopener" aria-label="LinkedIn">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4.98 3.5C4.98 4.88 3.86 6 2.48 6S0 4.88 0 3.5 1.12 1 2.48 1s2.5 1.12 2.5 2.5ZM.5 8h4V24h-4V8Zm7 0h3.8v2.2h.1c.53-1 1.83-2.2 3.77-2.2C19.2 8 21 10.1 21 14.1V24h-4v-8.6c0-2.05-.04-4.7-2.87-4.7-2.87 0-3.31 2.24-3.31 4.55V24h-4V8Z"/></svg>
          </a>
          <a href="https://github.com/robertoibanezmingarro" target="_blank" rel="noopener" aria-label="GitHub">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 .5C5.65.5.5 5.74.5 12.21c0 5.18 3.3 9.57 7.88 11.12.58.11.8-.26.8-.58 0-.29-.01-1.06-.02-2.08-3.2.71-3.88-1.58-3.88-1.58-.52-1.36-1.28-1.72-1.28-1.72-1.05-.73.08-.72.08-.72 1.16.08 1.76 1.22 1.76 1.22 1.03 1.81 2.7 1.29 3.36.99.1-.76.4-1.29.72-1.59-2.56-.3-5.26-1.32-5.26-5.86 0-1.3.45-2.36 1.2-3.19-.12-.3-.52-1.51.12-3.15 0 0 .98-.32 3.2 1.22a10.73 10.73 0 0 1 5.82 0c2.22-1.54 3.2-1.22 3.2-1.22.64 1.64.24 2.85.12 3.15.74.83 1.2 1.89 1.2 3.2 0 4.55-2.7 5.56-5.28 5.86.41.36.78 1.08.78 2.19 0 1.58-.02 2.86-.02 3.25 0 .32.21.7.8.58A11.74 11.74 0 0 0 23.5 12.2C23.5 5.75 18.35.5 12 .5Z"/></svg>
          </a>
        </div>
      </div>

      <div class="mobile-menu" id="mobile-menu" hidden>
        <nav aria-label="Navegación móvil">
          <a href="../index.html" data-nav="home">Home</a>
          <a href="./portfolio.html" data-nav="portfolio">Portfolio</a>
          <a href="./resume.html" data-nav="resume">Resume</a>
          <a href="./contact.html" data-nav="contact">Contact</a>
        </nav>
        <div class="social-links">
          <a href="https://www.linkedin.com/in/robertoibanezmingarro/" target="_blank" rel="noopener" aria-label="LinkedIn">LinkedIn</a>
          <a href="https://github.com/robertoibanezmingarro" target="_blank" rel="noopener" aria-label="GitHub">GitHub</a>
        </div>
      </div>
    </header>

    <main id="main-content" class="page-main project-page">
      <section class="section-narrow project-hero">
        <h1 class="page-title">Autonomous Sailboat Control System using STM32</h1>
        <div class="project-hero-grid">
          <div class="project-hero-intro">
            <p class="project-meta">Embedded systems portfolio article · deterministic control, sensing, communication, and actuation</p>
            <p class="project-abstract">
              Full-stack embedded implementation for an autonomous sailboat platform, integrating low-level STM32 firmware,
              sensor acquisition, motor/servo actuation, wireless control, and power electronics into a deployable architecture.
            </p>

            <ul class="tech-chips" aria-label="Core technologies used in the project">
              <li>STM32F103</li>
              <li>Register-level firmware</li>
              <li>I2C / UART / PWM</li>
              <li>XBee RF</li>
              <li>Power electronics</li>
            </ul>
          </div>

          <aside class="project-spec-card" aria-label="Project specifications">
            <dl>
              <div><dt>Role</dt><dd>Embedded systems engineer</dd></div>
              <div><dt>Scope</dt><dd>Firmware architecture, electronics integration, control loops, comms</dd></div>
              <div><dt>Deliverables</dt><dd>Technical article + system validation narrative</dd></div>
              <div><dt>Date</dt><dd>Portfolio project</dd></div>
            </dl>
          </aside>
        </div>
      </section>

      <div class="section-narrow project-layout">
        <aside class="project-toc" aria-label="On this page">
          <p class="project-toc-title">On this page</p>
          <nav>
            <ol id="project-toc-list"></ol>
          </nav>
        </aside>

        <section class="project-jump" aria-label="Jump to section">
          <label for="project-jump-select">Jump to section</label>
          <select id="project-jump-select">
            <option value="">Select a section</option>
          </select>
        </section>

        <div class="project-content" id="project-content">

      <section class="split-section">
        <article>
          <h2>System Overview &amp; Physical Platform</h2>
          <ul>
            <li>The mechanical platform supports full 360° yaw rotation and free roll motion under wind-induced dynamics.</li>
            <li>The embedded objective is to coordinate sail trimming, controlled rotation, and remote communication on the same constrained controller.</li>
            <li>The project is defined as a hardware–software integration problem where mechanical behavior and electronics are co-engineered.</li>
          </ul>
        </article>
        <figure>
          <img src="../assets/img/sailboat/sailboat_platform.jpg" alt="Autonomous sailboat physical platform" loading="lazy" />
          <figcaption>Complete autonomous sailboat platform with embedded electronics and sensors.</figcaption>
        </figure>
      </section>

      <section class="split-section reverse">
        <figure>
          <img src="../assets/img/sailboat/nucleo_f103.jpg" alt="NUCLEO F103-RB board" loading="lazy" />
          <figcaption>NUCLEO F103-RB board supporting the STM32F103 microcontroller.</figcaption>
        </figure>
        <article>
          <h2>Microcontroller Platform – STM32F103</h2>
          <ul>
            <li>The STM32F103 was selected intentionally over higher-end F4/H7 devices to enforce disciplined real-time design on limited resources.</li>
            <li>Cortex-M3 core features, NVIC control, PWM-capable timers, and SPI/I2C/USART peripherals cover all mission requirements.</li>
            <li>Firmware follows register-level control (no HAL abstraction) to keep timing, latency, and peripheral behavior fully deterministic.</li>
          </ul>
        </article>
      </section>

      <section class="split-section">
        <article>
          <h2>Global Embedded Architecture</h2>
          <ul>
            <li>The system architecture integrates incremental encoder, IMU, RTC, XBee, servo actuation, motor driver, and ADC battery monitoring.</li>
            <li>Each subsystem is mapped to dedicated peripherals and interrupt paths to avoid contention and non-deterministic scheduling.</li>
            <li>The architecture is designed around predictable control loops rather than best-effort event handling.</li>
          </ul>
        </article>
        <figure>
          <img src="../assets/img/sailboat/global_architecture.png" alt="Global embedded architecture diagram" loading="lazy" />
          <figcaption>Global embedded architecture of the sailboat control system.</figcaption>
        </figure>
      </section>

      <section class="split-section reverse">
        <figure>
          <img src="../assets/img/sailboat/encoder_principle.png" alt="Incremental encoder measurement principle" loading="lazy" />
          <figcaption>Wind vane and incremental encoder measurement chain.</figcaption>
        </figure>
        <article>
          <h2>Wind Angle Measurement (Incremental Encoder)</h2>
          <ul>
            <li>Quadrature decoding uses A/B channels plus index pulse for robust angular reference management.</li>
            <li>With 360 periods and 4× decoding, the implementation improves effective resolution while preserving direction information.</li>
            <li>Timer input capture and ISR-driven counting are structured for deterministic edge processing.</li>
          </ul>
        </article>
      </section>

      <section class="split-section">
        <article>
          <h2>Roll Measurement – IMU</h2>
          <ul>
            <li>The platform compares LSM9DS1 over I2C versus ADXL345 over SPI for roll-angle estimation trade-offs.</li>
            <li>Both sensor drivers were written from scratch, including multi-byte read flows and explicit bus-state handling.</li>
            <li>Bus management policy prioritizes deterministic acquisition timing under concurrent peripheral activity.</li>
          </ul>
        </article>
        <figure>
          <img src="../assets/img/sailboat/imu_modules.jpg" alt="IMU modules comparison" loading="lazy" />
          <figcaption>Accelerometer modules evaluated for roll angle estimation.</figcaption>
        </figure>
      </section>

      <section class="split-section reverse">
        <figure>
          <img src="../assets/img/sailboat/servo_pwm_signal.png" alt="Servo PWM timing signal" loading="lazy" />
          <figcaption>Standard RC servo control signal (20 ms period).</figcaption>
        </figure>
        <article>
          <h2>Sail Trim Control – PWM Servo</h2>
          <ul>
            <li>Sail control is generated with a 20 ms period and pulse width modulation between 1 ms and 2 ms.</li>
            <li>TIM PWM configuration is performed at register level to guarantee repeatable update timing.</li>
            <li>Duty-cycle updates are bounded to deterministic limits to preserve stable actuator behavior.</li>
          </ul>
        </article>
      </section>

      <section class="split-section">
        <article>
          <h2>Yaw Rotation – Motor Driver</h2>
          <ul>
            <li>Yaw actuation combines direction control with PWM switching above 20 kHz to reduce audible noise.</li>
            <li>The dedicated driver board separates power and control stages for cleaner switching behavior.</li>
            <li>Layout and routing decisions include EMI-aware partitioning and current-path control.</li>
          </ul>
        </article>
        <figure>
          <img src="../assets/img/sailboat/motor_driver_board.png" alt="Motor driver board layout and schematic" loading="lazy" />
          <figcaption>Motor driver PCB layout and power stage schematic.</figcaption>
        </figure>
      </section>

      <section class="split-section reverse">
        <figure>
          <img src="../assets/img/sailboat/xbee_module.jpg" alt="XBee wireless module" loading="lazy" />
          <figcaption>Digi XBee 2.4 GHz RF module used as wireless communication interface.</figcaption>
        </figure>
        <article>
          <h2>Wireless Communication – XBee</h2>
          <ul>
            <li>Communication is implemented on UART full duplex with a 100 ms command cycle.</li>
            <li>Reception uses interrupt-driven framing to reduce polling overhead and latency jitter.</li>
            <li>Status reporting is integrated into the same link for supervisory visibility and command acknowledgement.</li>
          </ul>
        </article>
      </section>

      <section class="split-section">
        <article>
          <h2>Power Architecture</h2>
          <ul>
            <li>The electrical chain starts from a 12 V input with dedicated protection stage.</li>
            <li>Regulation generates the 5 V domain for logic/peripherals with controlled distribution.</li>
            <li>Battery telemetry uses an ADC divider ratio of 1/13 for safe measurement within converter limits.</li>
          </ul>
        </article>
        <figure>
          <img src="../assets/img/sailboat/power_stage.png" alt="Power input and regulation stage" loading="lazy" />
          <figcaption>12 V power input protection and regulation stage.</figcaption>
        </figure>
      </section>

      <section class="split-section reverse">
        <figure>
          <img src="../assets/img/sailboat/interface_pcb.png" alt="Custom STM32 interface PCB" loading="lazy" />
          <figcaption>Custom interface PCB integrating STM32 module and peripherals.</figcaption>
        </figure>
        <article>
          <h2>Interface Board</h2>
          <ul>
            <li>The STM32 board is mounted as a removable module to simplify iteration and fault isolation.</li>
            <li>Debug access, oscilloscope probing points, and flexible IO breakouts are integrated from the start.</li>
            <li>The interface PCB enables fast hardware validation without compromising deployment architecture.</li>
          </ul>
        </article>
      </section>

      <section class="split-section">
        <article>
          <h2>Engineering Outcomes</h2>
          <ul>
            <li>This project represents a complete full-stack embedded implementation combining sensing, actuation, real-time control, communication protocols, and low-level firmware architecture on a constrained STM32F103 platform.</li>
            <li>Firmware is structured around peripheral-level control, interrupt architecture, NVIC prioritization, and deterministic execution paths.</li>
            <li>The final result integrates clock-tree control, real-time system design discipline, and hardware–software co-design into a single deployable embedded platform.</li>
          </ul>
        </article>
        <div class="project-cta">
          <h2>Full Technical Article (PDF)</h2>
          <p>This page is the curated narrative. The PDF contains the complete technical article, implementation details, and validation evidence.</p>
          <div class="project-actions">
            <a class="btn btn-primary" href="../assets/pdf/Sailboat_Portfolio.pdf" download>Download Full Technical PDF</a>
            <a class="btn btn-secondary" href="../assets/pdf/Sailboat_Portfolio.pdf" target="_blank" rel="noopener">Open PDF in new tab</a>
          </div>
        </div>
      </section>
        </div>
      </div>
    </main>

    <footer class="site-footer"><nav><a href="../index.html">Home</a><a href="./portfolio.html">Portfolio</a><a href="./resume.html">Resume</a><a href="./contact.html">Contact</a></nav><p>© 2026 Roberto Ibáñez Mingarro</p></footer>
    <script>
      (() => {
        const content = document.querySelector('#project-content');
        const tocList = document.querySelector('#project-toc-list');
        const jumpSelect = document.querySelector('#project-jump-select');
        if (!content || !tocList || !jumpSelect) return;

        const headings = [...content.querySelectorAll('h2')];
        const seen = new Map();
        const slugify = (text) => text.toLowerCase().trim().replace(/&/g, 'and').replace(/[^a-z0-9\s-]/g, '').replace(/\s+/g, '-');

        const sections = headings.map((heading) => {
          const base = slugify(heading.textContent || 'section');
          const count = seen.get(base) || 0;
          seen.set(base, count + 1);
          const id = count ? `${base}-${count + 1}` : base;
          heading.id = heading.id || id;

          const li = document.createElement('li');
          const link = document.createElement('a');
          link.href = `#${heading.id}`;
          link.textContent = heading.textContent || heading.id;
          li.appendChild(link);
          tocList.appendChild(li);

          const option = document.createElement('option');
          option.value = heading.id;
          option.textContent = heading.textContent || heading.id;
          jumpSelect.appendChild(option);

          return { heading, link };
        });

        jumpSelect.addEventListener('change', (event) => {
          const id = event.target.value;
          if (!id) return;
          const target = document.getElementById(id);
          if (target) {
            target.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        });

        const setActive = (id) => {
          sections.forEach(({ link, heading }) => {
            const isActive = heading.id === id;
            link.classList.toggle('is-active', isActive);
            if (isActive) jumpSelect.value = id;
          });
        };

        const observer = new IntersectionObserver(
          (entries) => {
            const visible = entries.filter((entry) => entry.isIntersecting).sort((a, b) => b.intersectionRatio - a.intersectionRatio);
            if (visible[0]) {
              setActive(visible[0].target.id);
            }
          },
          { rootMargin: '-35% 0px -55% 0px', threshold: [0.1, 0.45, 0.8] }
        );

        headings.forEach((heading) => observer.observe(heading));
        if (sections[0]) setActive(sections[0].heading.id);

      })();
    </script>
  </body>
</html>
